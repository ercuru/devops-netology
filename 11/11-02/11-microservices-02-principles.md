# Домашнее задание к занятию "11.02 Микросервисы: принципы"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: API Gateway 
>
>Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.
>
>Решение должно соответствовать следующим требованиям:
> - Маршрутизация запросов к нужному сервису на основе конфигурации
> - Возможность проверки аутентификационной информации в запросах
> - Обеспечение терминации HTTPS
>
>Обоснуйте свой выбор.

### Решение API Gateway

| API Gateway                                                        | Маршрутизация запросов на основе конфигурации | Проверка аутентификационной информации в запросах | Терминация HTTPS |
|:-------------------------------------------------------------------|:---------------------------------------------:|:-------------------------------------------------:|:----------------:|
| [Apache Apisix](https://apisix.apache.org)                         |                       +                       |                         +                         |        +         |
| [Caddy](https://caddyserver.com)                                   |                       +                       |                         +                         |        +         |
| [KrakenD](https://www.krakend.io/)                                 |                       +                       |                         +                         |        +         |
| [Kong](https://konghq.com/products/api-gateway-platform)           |                       +                       |                         +                         |        +         |
| [HAProxy](https://www.haproxy.com)                                 |                       +                       |                         +                         |        +         |
| [Nginx](https://nginx.com)                                         |                       +                       |                         +                         |        +         |
| [Ocelot](https://github.com/ThreeMammals/Ocelot)                   |                       +                       |                         +                         |        +         |
| [Tyk](https://tyk.io)                                              |                       +                       |                         +                         |        +         |
| [Amazon API Gateway](https://aws.amazon.com/ru/api-gateway/)       |                       +                       |                         +                         |        +         |
| [Azure](https://azure.microsoft.com/en-gb/services/api-management) |                       +                       |                         +                         |        +         |
| [Yandex API Gateway](https://cloud.yandex.ru/docs/api-gateway/)    |                       +                       |                         +                         |        +         |

В каждый из сервисов имеет свои преимущества и недостатки.
Если разрабатываемая система использует в облачную инфраструктуру, то удобнее было бы воспользоваться услугами облачного провайдера для быстрого внедрения и не усложнения системы в целом (в дополнении с более большими возможностями по защите).
Если инфрастуктура системы локальная, то как начальный вариант Nginx, как наиболее простой с точки зрения реализации и наличия большого кол-ва информации для развертывания под разные ситуации.

## Задача 2: Брокер сообщений
>
>Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.
>
>Решение должно соответствовать следующим требованиям:
>- Поддержка кластеризации для обеспечения надежности
>- Хранение сообщений на диске в процессе доставки
>- Высокая скорость работы
>- Поддержка различных форматов сообщений
>- Разделение прав доступа к различным потокам сообщений
>- Простота эксплуатации
>
>Обоснуйте свой выбор.

### Решение 2 Брокер сообщений

| Брокер сообщений      | Кластеризация | Хранение сообщений на диске при доставке | Высокая скорость работы | Различные форматы | Права доступа | Простота |
| :-------------------- | :-----------: |:----------------------------------------:| :--------------: | :----: | :-----------: | :------: |
| [ActiveMQ](https://activemq.apache.org)                     |  +  |                    +                     |  -  |  +  |  +  |  +  |
| [Kafka](https://kafka.apache.org)                           |  +  |                    +                     |  +  |  -  |  +  |  -  |
| [NATS](https://nats.io)                                     |  +  |                    +                     |  +  |  -  |  +  |  +  |
| [RabbitMQ](https://www.rabbitmq.com)                        |  +  |                    +                     | +/- |  +  |  +  |  +  |
| [Redis (pub,sub)](https://redis.io)                         |  +  |                    -                     |  +  |  -  |  -  |  +  |
| [ZeroMQ](https://zeromq.org)                                |  +  |                    +                     |  +  |  +  |  +  |  -  |
| [Amazon SQS](https://aws.amazon.com/ru/sqs/)                | N/A |                   N/A                    |  +  |  -  |  -  |  +  |
| [Yandex MQ](https://cloud.yandex.ru/services/message-queue) | N/A |                   N/A                    |  +  |  -  |  -  |  +  |

Пока нет жёстких ограничений по производительности, предпочтительно использовать самое популярные решения - RabbitMQ. По отзывам является одним из простейших для внедрения и большую базу знаний.

